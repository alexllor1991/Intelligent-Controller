<?xml version="1.0"?>
<!--
 build.xml

 (c) Copyright, Real-Time Innovations, 2012.  All rights reserved.
 No duplications, whole or partial, manual or electronic, may be made
 without express written permission.  Any such copies, or
 revisions thereof, must display this notice unaltered.
 This code contains trade secrets of Real-Time Innovations, Inc.


 This ant file was automatically generated by rtiddsgen.

 To build, type:
 	ant
 	
 To run subscriber, type:
 	ant topologiaSubscriber
 	
 To run publisher, type:
 	ant topologiaPublisher
 	
 Note: This ant file is only meant to build our example applications and
       may require alterations to build on your system.
-->
<project name="topologia Example" default="compile" basedir=".">
	<!-- Set properties -->
	<property environment="env"/>

	<!-- Ant Properties are immutable. If NDDSHOME is already set this is a NOOP -->
	<property name="env.NDDSHOME" value="/home/ubuntu/rti_connext_dds-5.2.3"/>
	
	<!-- Set Build Path -->
	<path id="build.classpath.release">
		<fileset dir="${env.NDDSHOME}/lib/java" includes="**/nddsjava.jar" />
	</path>
	
	<path id="build.classpath.debug">
		<fileset dir="${env.NDDSHOME}/lib/java" includes="**/nddsjavad.jar" />
	</path>
  
	<!-- Deletes the existing build -->
	<target name="clean">
		<delete>
			<fileset dir="." includes="**/*.class" />
		</delete>
	</target>

	<!-- Build examples -->
	<target name="compile">
		<javac srcdir="." destdir="." includeantruntime="false" classpathref="build.classpath.release" />
		<jar destfile="topologiaExample.jar"
			basedir="."
			includes="**/*.class">
		</jar>
	</target>
	
	<target name="compile-debug">
		<javac srcdir="." destdir="." includeantruntime="false" classpathref="build.classpath.debug" debug="on"/>
		<jar destfile="topologiaExample-debug.jar"
			basedir="."
			includes="**/*.class">
		</jar>
	</target>
	
	<!-- Run release subscriber -->
	<target name="topologiaSubscriber" depends="compile">
		<java fork="true" failonerror="yes" classpathref="build.classpath.release" classpath="topologiaExample.jar" classname="org.sdnhub.odl.tutorial.learningswitch.impl.topologiaSubscriber">
			<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc4.8.2"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
	<!-- Run release publisher -->
	<target name="topologiaPublisher" depends="compile">
		<java fork="true" failonerror="yes" classpathref="build.classpath.release" classpath="topologiaExample.jar" classname="org.sdnhub.odl.tutorial.learningswitch.impl.topologiaPublisher">
			<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc4.8.2"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
	<!-- Run debug subscriber -->
	<target name="topologiaSubscriber-debug" depends="compile-debug">
		<java fork="true" failonerror="yes" classpathref="build.classpath.debug" classpath="topologiaExample-debug.jar" classname="org.sdnhub.odl.tutorial.learningswitch.impl.topologiaSubscriber">
			<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc4.8.2"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
	<!-- Run debug publisher -->
	<target name="topologiaPublisher-debug" depends="compile-debug">
		<java fork="true" failonerror="yes" classpathref="build.classpath.debug" classpath="topologiaExample-debug.jar" classname="org.sdnhub.odl.tutorial.learningswitch.impl.topologiaPublisher">
			<env key="LD_LIBRARY_PATH" path="${env.LD_LIBRARY_PATH};${env.NDDSHOME}/lib/x64Linux3gcc4.8.2"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
</project>